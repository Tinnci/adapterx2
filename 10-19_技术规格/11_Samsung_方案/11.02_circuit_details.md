# Project-S 详细电路设计

## 一、XC6206P182MR (1.8V LDO 稳压器)

### 1.1 芯片概述

| 参数 | 值 |
|------|-----|
| 型号 | XC6206P182MR |
| 输出电压 | 1.8V ±2% |
| 最大输出电流 | 200mA |
| 压差 (Dropout) | 250mV @ 100mA |
| 静态电流 | 1µA (typ) |
| 封装 | SOT-23-3 |

### 1.2 引脚定义 (SOT-23-3 封装)

```
      ┌───────┐
 VSS ─┤1     3├─ VIN
      │   ●   │
      │       │
VOUT ─┤2     ─┤
      └───────┘
      (底视图)
```

| 引脚号 | 名称 | 网络名 | 连接 |
|--------|------|--------|------|
| 1 | VSS | `GND` | 公共地 |
| 2 | VOUT | `VCC_1V8` | 输出 1.8V，连接 TXS0108E 的 VCCA |
| 3 | VIN | `VBUS_5V` | 输入 5V，来自 USB-C VBUS |

### 1.3 外围电路要求

```
                    XC6206P182MR
                    ┌─────────┐
    VBUS_5V ───┬───┤VIN  VOUT├───┬─── VCC_1V8
               │    │         │   │
              ┌┴┐   │   VSS   │  ┌┴┐
         C1   │ │   └────┬────┘  │ │  C2
        1µF   │ │        │       │ │ 1µF
              └┬┘        │       └┬┘
               │         │        │
               └─────────┴────────┴─── GND
```

| 元件 | 值 | 封装 | 网络连接 | 说明 |
|------|-----|------|----------|------|
| C1 | 1µF | 0603 | VBUS_5V ↔ GND | 输入滤波电容，靠近 VIN 引脚 |
| C2 | 1µF | 0603 | VCC_1V8 ↔ GND | 输出稳定电容，必须，用于相位补偿 |

### 1.4 设计注意事项

1. **压差功耗**：输入 5V，输出 1.8V，压差 3.2V。TXS0108E 静态电流约 4µA，功耗可忽略
2. **电容位置**：C1、C2 必须尽量靠近芯片引脚
3. **电容类型**：推荐 X5R 或 X7R 介质的陶瓷电容 (MLCC)

---

## 二、TXS0108E (8 路双向电平转换器)

### 2.1 芯片概述

| 参数 | 值 |
|------|-----|
| 型号 | TXS0108E |
| 通道数 | 8 路双向 |
| VCCA 范围 | 1.2V ~ 3.6V |
| VCCB 范围 | 1.65V ~ 5.5V |
| 数据速率 | 最高 110 Mbps (推挽) |
| 内部上拉 | 约 40kΩ |
| 封装 | TSSOP-20 |

### 2.2 引脚定义 (TSSOP-20 封装)

```
              TXS0108E
        ┌───────────────┐
  VCCA ─┤1            20├─ VCCB
    A1 ─┤2            19├─ B1
    A2 ─┤3            18├─ B2
    A3 ─┤4            17├─ B3
    A4 ─┤5            16├─ B4
    A5 ─┤6            15├─ B5
    A6 ─┤7            14├─ B6
    A7 ─┤8            13├─ B7
    A8 ─┤9            12├─ B8
    OE ─┤10           11├─ GND
        └───────────────┘
```

### 2.3 引脚连接表

| 引脚号 | 名称 | 网络名 | 连接 | 说明 |
|--------|------|--------|------|------|
| 1 | VCCA | `VCC_1V8` | XC6206 VOUT | 低压侧电源 1.8V |
| 2 | A1 | `PHONE_RX` | USB-C A6 (D+) | 手机 RX (接收) |
| 3 | A2 | `PHONE_TX` | USB-C A7 (D-) | 手机 TX (发送) |
| 4 | A3 | — | NC (不连接) | 保留 |
| 5 | A4 | — | NC | 保留 |
| 6 | A5 | — | NC | 保留 |
| 7 | A6 | — | NC | 保留 |
| 8 | A7 | — | NC | 保留 |
| 9 | A8 | — | NC | 保留 |
| 10 | OE | `OE_EN` | 通过 R2 上拉至 VCC_1V8 | 使能引脚 |
| 11 | GND | `GND` | 公共地 | 接地 |
| 12 | B8 | — | NC | 保留 |
| 13 | B7 | — | NC | 保留 |
| 14 | B6 | — | NC | 保留 |
| 15 | B5 | — | NC | 保留 |
| 16 | B4 | — | NC | 保留 |
| 17 | B3 | — | NC | 保留 |
| 18 | B2 | `TTL_TX` | 排针 TX | 调试器发送 → 手机 RX |
| 19 | B1 | `TTL_RX` | 排针 RX | 手机发送 → 调试器接收 |
| 20 | VCCB | `VCC_3V3` | 排针 VCC / 调试器 3.3V | 高压侧电源 3.3V |

### 2.4 外围电路要求

```
                         TXS0108E
                    ┌─────────────────┐
    VCC_1V8 ───┬───┤VCCA        VCCB├───┬─── VCC_3V3
               │    │                │   │
              ┌┴┐   │                │  ┌┴┐
         C3   │ │   │                │  │ │  C4
       100nF  │ │   │                │  │ │ 100nF
              └┬┘   │                │  └┬┘
               │    │                │   │
               │    │  A1        B1  │   │
    PHONE_RX ──│────┤────────────────├───│── TTL_RX
               │    │  A2        B2  │   │
    PHONE_TX ──│────┤────────────────├───│── TTL_TX
               │    │                │   │
               │    │  OE        GND │   │
               │    └───┬────────┬───┘   │
               │   ┌────┘        │       │
               │  ┌┴┐            │       │
               │  │ │ R2         │       │
               │  │ │ 10kΩ       │       │
               │  └┬┘            │       │
               │   │             │       │
               └───┴─────────────┴───────┴─── GND
```

| 元件 | 值 | 封装 | 网络连接 | 说明 |
|------|-----|------|----------|------|
| C3 | 100nF | 0603 | VCC_1V8 ↔ GND | VCCA 去耦电容 |
| C4 | 100nF | 0603 | VCC_3V3 ↔ GND | VCCB 去耦电容 |
| R2 | 10kΩ | 0603 | OE_EN ↔ VCC_1V8 | OE 上拉电阻 |

### 2.5 设计注意事项

1. **电压约束**：必须满足 VCCA ≤ VCCB (1.8V < 3.3V ✓)
2. **OE 引脚**：**绝对不能悬空**，必须上拉至 VCCA
3. **内部上拉**：芯片内置约 40kΩ 上拉，UART 线无需外加上拉
4. **外部电阻禁忌**：不要在 A/B 端口添加小于 50kΩ 的外部上拉/下拉电阻，会干扰内部驱动

---

## 三、完整网络命名表 (Netlist)

### 3.1 电源网络

| 网络名 | 电压 | 说明 | 连接节点 |
|--------|------|------|----------|
| `VBUS_5V` | 5V | USB VBUS 电源 | USB-C VBUS (A4/A9/B4/B9), XC6206.VIN, C1, J2 透传 |
| `VCC_1V8` | 1.8V | LDO 输出 | XC6206.VOUT, C2, TXS0108E.VCCA, C3, R2 |
| `VCC_3V3` | 3.3V | 调试器供电 | 排针 VCC, TXS0108E.VCCB, C4 |
| `GND` | 0V | 公共地 | 所有芯片 GND, 所有电容负极, USB-C GND, 排针 GND |

### 3.2 信号网络

| 网络名 | 电压域 | 方向 | 说明 | 连接节点 |
|--------|--------|------|------|----------|
| `PHONE_RX` | 1.8V | 手机 ← 调试器 | 手机接收端 | USB-C A6 (D+), TXS0108E.A1 |
| `PHONE_TX` | 1.8V | 手机 → 调试器 | 手机发送端 | USB-C A7 (D-), TXS0108E.A2 |
| `TTL_RX` | 3.3V | 调试器 ← 手机 | 调试器接收端 | TXS0108E.B1, 排针 RX |
| `TTL_TX` | 3.3V | 调试器 → 手机 | 调试器发送端 | TXS0108E.B2, 排针 TX |
| `OE_EN` | 1.8V | — | 使能信号 | TXS0108E.OE, R2 |

### 3.3 激活网络

| 网络名 | 说明 | 连接节点 |
|--------|------|----------|
| `MUIC_JIG` | MUIC 激活信号 | USB-C B12, R1 (619kΩ) |

---

## 四、完整原理图描述

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                           Project-S 原理图                                    │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────┐                                                             │
│  │  USB-C 公头  │                                                             │
│  │    (J1)     │                                                             │
│  │             │          ┌──────────┐          ┌──────────────┐             │
│  │ VBUS ───────┼──┬──────┤VIN   VOUT├────┬─────┤VCCA          │             │
│  │ (A4/A9)     │  │       │ XC6206   │    │     │              │             │
│  │             │ ┌┴┐      │   (U2)   │   ┌┴┐    │   TXS0108E   │             │
│  │             │ │C1│     │          │   │C2│   │    (U1)      │  ┌────────┐ │
│  │             │ │1µF│    │   VSS    │   │1µF│  │              │  │ 排针   │ │
│  │             │ └┬┘      └────┬─────┘   └┬┘    │              │  │ (J3)   │ │
│  │             │  │            │          │     │         VCCB├──┤VCC 3.3V│ │
│  │ A6 (D+) ────┼──│────────────│──────────│─────┤A1         B1├──┤RX      │ │
│  │ (PHONE_RX)  │  │            │          │     │              │  │        │ │
│  │             │  │            │          │     │              │  │        │ │
│  │ A7 (D-) ────┼──│────────────│──────────│─────┤A2         B2├──┤TX      │ │
│  │ (PHONE_TX)  │  │            │          │     │              │  │        │ │
│  │             │  │            │          │     │              │  │        │ │
│  │ B12 ────────┼──│───[R1 619kΩ]──────────│─────┤OE ──[R2]─┬──│  │        │ │
│  │ (MUIC_JIG)  │  │            │          │     │    10kΩ  │  │  │        │ │
│  │             │  │            │          │     │          │  │  │        │ │
│  │ GND ────────┼──┴────────────┴──────────┴─────┤GND       ├──┴──┤GND     │ │
│  │ (A1/A12)    │                                │          │     │        │ │
│  │             │                               ┌┴┐        ┌┴┐    │        │ │
│  │             │                               │C3│       │C4│   │        │ │
│  │             │                               │0.1µF│    │0.1µF│ │        │ │
│  │             │                               └┬┘        └┬┘    │        │ │
│  │             │                                └──────────┴─────┴────────┘ │
│  └─────────────┘                                                             │
│                                                                              │
│  ┌─────────────┐                                                             │
│  │ USB-C 母座  │                                                             │
│  │    (J2)     │  ← 仅供电透传 (VBUS + GND)                                   │
│  └─────────────┘                                                             │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 五、BOM 更新

| 编号 | 描述 | 值 | 封装 | 数量 | 网络 |
|------|------|-----|------|------|------|
| J1 | USB Type-C 公头 | — | 24P | 1 | 多个 |
| J2 | USB Type-C 母座 | — | 24P | 1 | VBUS_5V, GND |
| J3 | 排针 | — | 2.54mm 1×4P | 1 | VCC_3V3, TTL_TX, TTL_RX, GND |
| U1 | 电平转换器 | TXS0108E | TSSOP-20 | 1 | 多个 |
| U2 | LDO 稳压器 | XC6206P182MR | SOT-23-3 | 1 | VBUS_5V, VCC_1V8, GND |
| R1 | MUIC 激活电阻 | 619kΩ ±1% | 0603 | 1 | MUIC_JIG, GND |
| R2 | OE 上拉电阻 | 10kΩ | 0603 | 1 | OE_EN, VCC_1V8 |
| C1 | 输入滤波电容 | 1µF | 0603 | 1 | VBUS_5V, GND |
| C2 | 输出稳定电容 | 1µF | 0603 | 1 | VCC_1V8, GND |
| C3 | VCCA 去耦电容 | 100nF | 0603 | 1 | VCC_1V8, GND |
| C4 | VCCB 去耦电容 | 100nF | 0603 | 1 | VCC_3V3, GND |

---

## 六、安全检查清单

- [ ] XC6206 输出确认为 1.8V（使用万用表测量 VCC_1V8 网络）
- [ ] TXS0108E OE 引脚已上拉（测量 OE_EN ≈ 1.8V）
- [ ] VCCA < VCCB 条件满足 (1.8V < 3.3V)
- [ ] 所有 GND 连通（使用万用表蜂鸣档测试）
- [ ] 619kΩ 电阻精度为 1%（使用万用表测量）
- [ ] 排针 VCC 确认为 3.3V（不是 5V！）
